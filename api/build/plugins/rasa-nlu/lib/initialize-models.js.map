{"version":3,"sources":["../../../../server/plugins/rasa-nlu/lib/initialize-models.js"],"names":["logger","require","name","module","exports","http","path","Models","initializedModels","_","each","model","index","isNil","Error","defaultFunction","default","debug"],"mappings":";;AAAA;;;;AAEA,MAAMA,MAAM,GAAGC,OAAO,CAAC,sBAAD,CAAP,CAAgC;AAAEC,EAAAA,IAAI,EAAG;AAAT,CAAhC,CAAf;;AAEAC,MAAM,CAACC,OAAP,GAAiB,OAAO;AAAEC,EAAAA,IAAF;AAAQC,EAAAA;AAAR,CAAP,KAA0B;AAEvC,QAAMC,MAAM,GAAGN,OAAO,CAACK,IAAD,CAAtB;;AACA,QAAME,iBAAiB,GAAG,EAA1B;AACA,QAAMC,gBAAEC,IAAF,CAAOH,MAAP,EAAe,CAACI,KAAD,EAAQC,KAAR,KAAkB;AAEnC,QAAIH,gBAAEI,KAAF,CAAQF,KAAK,CAACT,IAAd,KAAuBO,gBAAEI,KAAF,CAAQF,KAAK,CAACL,IAAd,CAA3B,EAAgD;AAC5C,YAAM,IAAIQ,KAAJ,CAAW,UAASR,IAAK,IAAGM,KAAM,2CAAlC,CAAN;AACH;;AACD,UAAMG,eAAe,GAAGJ,KAAK,CAACK,OAAN,CAAc;AAAEX,MAAAA;AAAF,KAAd,CAAxB;;AAEA,QAAII,gBAAEI,KAAF,CAAQE,eAAR,CAAJ,EAA8B;AAC1B,YAAM,IAAID,KAAJ,CAAW,UAASH,KAAK,CAACT,IAAK,gCAA/B,CAAN;AACH;;AACDF,IAAAA,MAAM,CAACiB,KAAP,CAAaN,KAAK,CAACT,IAAnB;AACAM,IAAAA,iBAAiB,CAACG,KAAK,CAACT,IAAP,CAAjB,GAAgCa,eAAhC;AACH,GAZK,CAAN;AAaA,SAAOP,iBAAP;AACH,CAlBD","sourcesContent":["import _ from 'lodash';\n\nconst logger = require('../../../util/logger')({ name: `plugin:rasa-nlu:initialize-model` });\n\nmodule.exports = async ({ http, path }) => {\n\n    const Models = require(path);\n    const initializedModels = {};\n    await _.each(Models, (model, index) => {\n\n        if (_.isNil(model.name) || _.isNil(model.path)) {\n            throw new Error(`Model [${path}/${index}] should have a name and path properties.`);\n        }\n        const defaultFunction = model.default({ http });\n\n        if (_.isNil(defaultFunction)) {\n            throw new Error(`Model [${model.name}] should have a default export`);\n        }\n        logger.debug(model.name);\n        initializedModels[model.name] = defaultFunction;\n    });\n    return initializedModels;\n};\n"],"file":"initialize-models.js"}