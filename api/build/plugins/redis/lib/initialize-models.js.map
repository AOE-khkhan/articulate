{"version":3,"sources":["../../../../server/plugins/redis/lib/initialize-models.js"],"names":["logger","require","name","module","exports","redis","path","prefix","Nohm","setPrefix","setClient","setPublish","Mods","_","each","model","debug","modelName","register"],"mappings":";;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAGC,OAAO,CAAC,sBAAD,CAAP,CAAgC;AAAEC,EAAAA,IAAI,EAAG;AAAT,CAAhC,CAAf;;AAEAC,MAAM,CAACC,OAAP,GAAiB,OAAO;AAAEC,EAAAA,KAAF;AAASC,EAAAA,IAAT;AAAeC,EAAAA;AAAf,CAAP,KAAmC;AAEhDC,gBAAKC,SAAL,CAAeF,MAAf;;AACAC,gBAAKE,SAAL,CAAeL,KAAf;;AACAG,gBAAKG,UAAL,CAAgB,IAAhB;;AACA,QAAMC,IAAI,GAAGX,OAAO,CAACK,IAAD,CAApB;;AACA,QAAMO,gBAAEC,IAAF,CAAOF,IAAP,EAAcG,KAAD,IAAW;AAE1Bf,IAAAA,MAAM,CAACgB,KAAP,CAAaD,KAAK,CAACE,SAAnB;;AACAT,kBAAKU,QAAL,CAAcH,KAAd;AACH,GAJK,CAAN;AAKA,SAAOP,aAAP;AACH,CAZD","sourcesContent":["import _ from 'lodash';\nimport Nohm from 'nohm';\n\nconst logger = require('../../../util/logger')({ name: `plugin:redis:initialize-model` });\n\nmodule.exports = async ({ redis, path, prefix }) => {\n\n    Nohm.setPrefix(prefix);\n    Nohm.setClient(redis);\n    Nohm.setPublish(true);\n    const Mods = require(path);\n    await _.each(Mods, (model) => {\n\n        logger.debug(model.modelName);\n        Nohm.register(model);\n    });\n    return Nohm;\n};\n"],"file":"initialize-models.js"}