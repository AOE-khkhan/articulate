{"version":3,"sources":["../../../../server/plugins/es/lib/base-model.js"],"names":["module","exports","BaseModel","constructor","name","properties","client","index","_","snakeCase","count","query","body","undefined","createInstance","data","refresh","type","updateInstance","id","removeInstance","delete","findById","source","get","_source","search"],"mappings":";;AAAA;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB,MAAMC,SAAN,CAAgB;AAC7BC,EAAAA,WAAW,CAAC;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,UAAR;AAAoBC,IAAAA;AAApB,GAAD,EAA+B;AAEtC,SAAKF,IAAL,GAAYA,IAAZ;AACA,SAAKG,KAAL,GAAaC,gBAAEC,SAAF,CAAYL,IAAZ,CAAb;AACA,SAAKC,UAAL,GAAkBA,UAAlB;AACA,SAAKC,MAAL,GAAcA,MAAd;AACH;;AAED,QAAMI,KAAN,CAAY;AAAEC,IAAAA,KAAK,GAAG;AAAV,MAAmB,EAA/B,EAAmC;AAAA,UAEvBJ,KAFuB,GAEb,IAFa,CAEvBA,KAFuB;AAG/B,UAAMK,IAAI,GAAGD,KAAK,GAAG;AAAEA,MAAAA;AAAF,KAAH,GAAeE,SAAjC;;AAH+B,iBAIb,MAAM,KAAKP,MAAL,CAAYI,KAAZ,CAAkB;AACtCH,MAAAA,KADsC;AAEtCK,MAAAA;AAFsC,KAAlB,CAJO;AAAA,UAIvBF,KAJuB,QAIvBA,KAJuB;;AAQ/B,WAAOA,KAAP;AACH;;AAED,QAAMI,cAAN,CAAqB;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,OAAO,GAAG;AAAlB,GAArB,EAA+C;AAAA,UAEnCT,KAFmC,GAEzB,IAFyB,CAEnCA,KAFmC;AAG3C,WAAO,MAAM,KAAKD,MAAL,CAAYC,KAAZ,CAAkB;AAC3BA,MAAAA,KAD2B;AAE3BU,MAAAA,IAAI,EAAEV,KAFqB;AAG3BK,MAAAA,IAAI,EAAEG,IAHqB;AAI3BC,MAAAA;AAJ2B,KAAlB,CAAb;AAMH;;AAED,QAAME,cAAN,CAAqB;AAAEC,IAAAA,EAAF;AAAMJ,IAAAA,IAAN;AAAYC,IAAAA,OAAO,GAAG;AAAtB,GAArB,EAAmD;AAAA,UAEvCT,KAFuC,GAE7B,IAF6B,CAEvCA,KAFuC;AAG/C,WAAO,MAAM,KAAKD,MAAL,CAAYC,KAAZ,CAAkB;AAC3BA,MAAAA,KAD2B;AAE3BU,MAAAA,IAAI,EAAEV,KAFqB;AAG3BY,MAAAA,EAH2B;AAI3BP,MAAAA,IAAI,EAAEG,IAJqB;AAK3BC,MAAAA;AAL2B,KAAlB,CAAb;AAOH;;AAED,QAAMI,cAAN,CAAqB;AAAED,IAAAA,EAAF;AAAMH,IAAAA,OAAO,GAAG;AAAhB,GAArB,EAA6C;AAAA,UAEjCT,KAFiC,GAEvB,IAFuB,CAEjCA,KAFiC;AAGzC,UAAM,KAAKD,MAAL,CAAYe,MAAZ,CAAmB;AACrBd,MAAAA,KADqB;AAErBU,MAAAA,IAAI,EAAEV,KAFe;AAGrBY,MAAAA,EAHqB;AAIrBH,MAAAA;AAJqB,KAAnB,CAAN;AAMH;;AAED,QAAMM,QAAN,CAAe;AAAEH,IAAAA,EAAF;AAAMH,IAAAA,OAAO,GAAG,IAAhB;AAAsBO,IAAAA,MAAM,GAAG;AAA/B,GAAf,EAAsD;AAAA,UAE1ChB,KAF0C,GAEhC,IAFgC,CAE1CA,KAF0C;AAGlD,WAAO,MAAM,KAAKD,MAAL,CAAYkB,GAAZ,CAAgB;AACzBjB,MAAAA,KADyB;AAEzBU,MAAAA,IAAI,EAAEV,KAFmB;AAGzBY,MAAAA,EAHyB;AAIzBH,MAAAA,OAJyB;AAKzBS,MAAAA,OAAO,EAAEF;AALgB,KAAhB,CAAb;AAOH;;AAED,QAAMG,MAAN,CAAa;AAAEd,IAAAA;AAAF,GAAb,EAAuB;AAAA,UAEXL,KAFW,GAED,IAFC,CAEXA,KAFW;AAGnB,WAAO,MAAM,KAAKD,MAAL,CAAYoB,MAAZ,CAAmB;AAC5BnB,MAAAA,KAD4B;AAE5BK,MAAAA;AAF4B,KAAnB,CAAb;AAIH;;AAzE4B,CAAjC","sourcesContent":["import _ from 'lodash';\n\nmodule.exports = class BaseModel {\n    constructor({ name, properties, client }) {\n\n        this.name = name;\n        this.index = _.snakeCase(name);\n        this.properties = properties;\n        this.client = client;\n    }\n\n    async count({ query = null } = {}) {\n\n        const { index } = this;\n        const body = query ? { query } : undefined;\n        const { count } = await this.client.count({\n            index,\n            body\n        });\n        return count;\n    }\n\n    async createInstance({ data, refresh = true }) {\n\n        const { index } = this;\n        return await this.client.index({\n            index,\n            type: index,\n            body: data,\n            refresh\n        });\n    }\n\n    async updateInstance({ id, data, refresh = true }) {\n\n        const { index } = this;\n        return await this.client.index({\n            index,\n            type: index,\n            id,\n            body: data,\n            refresh\n        });\n    }\n\n    async removeInstance({ id, refresh = true }) {\n\n        const { index } = this;\n        await this.client.delete({\n            index,\n            type: index,\n            id,\n            refresh\n        });\n    }\n\n    async findById({ id, refresh = true, source = true }) {\n\n        const { index } = this;\n        return await this.client.get({\n            index,\n            type: index,\n            id,\n            refresh,\n            _source: source\n        });\n    }\n\n    async search({ body }) {\n\n        const { index } = this;\n        return await this.client.search({\n            index,\n            body\n        });\n    }\n};\n"],"file":"base-model.js"}