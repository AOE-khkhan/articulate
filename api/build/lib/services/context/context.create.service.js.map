{"version":3,"sources":["../../../../server/lib/services/context/context.create.service.js"],"names":["module","exports","data","returnModel","redis","server","app","Model","factory","MODEL_CONTEXT","actionQueue","responseQueue","savedSlots","createInstance","frames","allProperties","error"],"mappings":";;AAAA;;AACA;;;;;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB,gBAAgB;AAAEC,EAAAA,IAAF;AAAQC,EAAAA,WAAW,GAAG;AAAtB,CAAhB,EAA+C;AAAA,QAEpDC,KAFoD,GAE1C,KAAKC,MAAL,CAAYC,GAF8B,CAEpDF,KAFoD;AAG5D,QAAMG,KAAK,GAAG,MAAMH,KAAK,CAACI,OAAN,CAAcC,wBAAd,CAApB;;AACA,MAAI;AACAP,IAAAA,IAAI,CAACQ,WAAL,GAAmB,EAAnB;AACAR,IAAAA,IAAI,CAACS,aAAL,GAAqB,EAArB;AACAT,IAAAA,IAAI,CAACU,UAAL,GAAkB,EAAlB;AACA,UAAML,KAAK,CAACM,cAAN;AAAuBX,MAAAA;AAAvB,OAAgC;AAAEY,MAAAA,MAAM,EAAE;AAAV,KAAhC,EAAN;AACA,WAAOX,WAAW,GAAGI,KAAH,GAAWA,KAAK,CAACQ,aAAN,EAA7B;AACH,GAND,CAOA,OAAOC,KAAP,EAAc;AACV,UAAM,oBAAkB;AAAEA,MAAAA;AAAF,KAAlB,CAAN;AACH;AACJ,CAdD","sourcesContent":["import { MODEL_CONTEXT } from '../../../util/constants';\nimport RedisErrorHandler from '../../errors/redis.error-handler';\n\nmodule.exports = async function ({ data, returnModel = false }) {\n\n    const { redis } = this.server.app;\n    const Model = await redis.factory(MODEL_CONTEXT);\n    try {\n        data.actionQueue = [];\n        data.responseQueue = [];\n        data.savedSlots = {};\n        await Model.createInstance({ data, ...{ frames: [] } });\n        return returnModel ? Model : Model.allProperties();\n    }\n    catch (error) {\n        throw RedisErrorHandler({ error });\n    }\n};\n"],"file":"context.create.service.js"}