{"version":3,"sources":["../../../../server/lib/services/context/context.remove-frames-by-session-and-frame.service.js"],"names":["module","exports","sessionId","frameId","server","services","contextService","Frame","findFrameBySessionAndFrame","returnModel","inDb","removeInstance","Promise","reject","NotFoundErrorHandler","model","MODEL_FRAME","id","error"],"mappings":";;AAAA;;AAGA;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB,gBAAgB;AAAEC,EAAAA,SAAF;AAAaC,EAAAA;AAAb,CAAhB,EAAyC;AAAA,eAE3B,MAAM,KAAKC,MAAL,CAAYC,QAAZ,EAFqB;AAAA,QAE9CC,cAF8C,QAE9CA,cAF8C;;AAItD,MAAI;AACA,UAAMC,KAAK,GAAG,MAAMD,cAAc,CAACE,0BAAf,CAA0C;AAAEN,MAAAA,SAAF;AAAaC,MAAAA,OAAb;AAAsBM,MAAAA,WAAW,EAAE;AAAnC,KAA1C,CAApB;;AACA,QAAIF,KAAK,CAACG,IAAV,EAAgB;AACZ,YAAMH,KAAK,CAACI,cAAN,EAAN;AACH,KAFD,MAGK;AACD,aAAOC,OAAO,CAACC,MAAR,CAAeC,oBAAoB,CAAC;AAAEC,QAAAA,KAAK,EAAEC,sBAAT;AAAsBC,QAAAA,EAAE,EAAEd;AAA1B,OAAD,CAAnC,CAAP;AACH;AACJ,GARD,CASA,OAAOe,KAAP,EAAc;AACV,UAAM,oBAAkB;AAAEA,MAAAA;AAAF,KAAlB,CAAN;AACH;AACJ,CAhBD","sourcesContent":["import {\n    MODEL_FRAME\n} from '../../../util/constants';\nimport RedisErrorHandler from '../../errors/redis.error-handler';\n\nmodule.exports = async function ({ sessionId, frameId  }) {\n\n    const { contextService } = await this.server.services();\n\n    try {\n        const Frame = await contextService.findFrameBySessionAndFrame({ sessionId, frameId, returnModel: true });\n        if (Frame.inDb) {\n            await Frame.removeInstance();\n        }\n        else {\n            return Promise.reject(NotFoundErrorHandler({ model: MODEL_FRAME, id: frameId }));\n        }\n    }\n    catch (error) {\n        throw RedisErrorHandler({ error });\n    }\n};\n"],"file":"context.remove-frames-by-session-and-frame.service.js"}