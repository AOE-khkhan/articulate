{"version":3,"sources":["../../../../server/lib/services/context/context.remove-by-session.service.js"],"names":["module","exports","sessionId","redis","server","app","Model","factory","MODEL_CONTEXT","findBySessionId","inDb","removeInstance","Promise","reject","model","id","error"],"mappings":";;AAAA;;AACA;;AACA;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB,gBAAgB;AAAEC,EAAAA;AAAF,CAAhB,EAA+B;AAAA,QAEpCC,KAFoC,GAE1B,KAAKC,MAAL,CAAYC,GAFc,CAEpCF,KAFoC;;AAG5C,MAAI;AACA,UAAMG,KAAK,GAAG,MAAMH,KAAK,CAACI,OAAN,CAAcC,wBAAd,CAApB;AACA,UAAMF,KAAK,CAACG,eAAN,CAAsB;AAAEP,MAAAA;AAAF,KAAtB,CAAN;;AACA,QAAII,KAAK,CAACI,IAAV,EAAgB;AACZ,aAAO,MAAMJ,KAAK,CAACK,cAAN,EAAb;AACH;;AACD,WAAOC,OAAO,CAACC,MAAR,CAAe,qBAAqB;AAAEC,MAAAA,KAAK,EAAEN,wBAAT;AAAwBO,MAAAA,EAAE,EAAEb;AAA5B,KAArB,CAAf,CAAP;AAEH,GARD,CASA,OAAOc,KAAP,EAAc;AACV,UAAM,oBAAkB;AAAEA,MAAAA;AAAF,KAAlB,CAAN;AACH;AACJ,CAfD","sourcesContent":["import { MODEL_CONTEXT } from '../../../util/constants';\nimport NotFoundErrorHandler from '../../errors/global.not-found-error';\nimport RedisErrorHandler from '../../errors/redis.error-handler';\n\nmodule.exports = async function ({ sessionId }) {\n\n    const { redis } = this.server.app;\n    try {\n        const Model = await redis.factory(MODEL_CONTEXT);\n        await Model.findBySessionId({ sessionId });\n        if (Model.inDb) {\n            return await Model.removeInstance();\n        }\n        return Promise.reject(NotFoundErrorHandler({ model: MODEL_CONTEXT, id: sessionId }));\n\n    }\n    catch (error) {\n        throw RedisErrorHandler({ error });\n    }\n};\n"],"file":"context.remove-by-session.service.js"}