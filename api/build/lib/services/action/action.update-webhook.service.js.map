{"version":3,"sources":["../../../../server/lib/services/action/action.update-webhook.service.js"],"names":["module","exports","id","webhookData","returnModel","server","services","globalService","ActionModel","findById","model","MODEL_ACTION","ids","getAll","MODEL_WEBHOOK","WebhookModel","inDb","updateInstance","data","allProperties","Promise","reject","error"],"mappings":";;AAAA;;AAIA;;AACA;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB,gBAAgB;AAAEC,EAAAA,EAAF;AAAMC,EAAAA,WAAN;AAAmBC,EAAAA,WAAW,GAAG;AAAjC,CAAhB,EAA0D;AAAA,eAE7C,MAAM,KAAKC,MAAL,CAAYC,QAAZ,EAFuC;AAAA,QAE/DC,aAF+D,QAE/DA,aAF+D;;AAGvE,MAAI;AAEA,UAAMC,WAAW,GAAG,MAAMD,aAAa,CAACE,QAAd,CAAuB;AAAEP,MAAAA,EAAF;AAAMQ,MAAAA,KAAK,EAAEC,uBAAb;AAA2BP,MAAAA,WAAW,EAAE;AAAxC,KAAvB,CAA1B;AACA,UAAMQ,GAAG,GAAG,MAAMJ,WAAW,CAACK,MAAZ,CAAmBC,wBAAnB,EAAkCA,wBAAlC,CAAlB;AACA,UAAMC,YAAY,GAAG,MAAMR,aAAa,CAACE,QAAd,CAAuB;AAAEP,MAAAA,EAAE,EAAEU,GAAG,CAAC,CAAD,CAAT;AAAcF,MAAAA,KAAK,EAAEI,wBAArB;AAAoCV,MAAAA,WAAW,EAAE;AAAjD,KAAvB,CAA3B;;AACA,QAAIW,YAAY,CAACC,IAAjB,EAAuB;AACnB,YAAMD,YAAY,CAACE,cAAb,CAA4B;AAAEC,QAAAA,IAAI,EAAEf;AAAR,OAA5B,CAAN;AACA,aAAOC,WAAW,GAAGW,YAAH,GAAkBA,YAAY,CAACI,aAAb,EAApC;AACH;;AACD,WAAOC,OAAO,CAACC,MAAR,CAAe,qBAAc;AAAEX,MAAAA,KAAK,EAAEI;AAAT,KAAd,CAAf,CAAP;AACH,GAVD,CAWA,OAAOQ,KAAP,EAAc;AACV,UAAM,oBAAkB;AAAEA,MAAAA;AAAF,KAAlB,CAAN;AACH;AACJ,CAjBD","sourcesContent":["import {\n    MODEL_ACTION,\n    MODEL_WEBHOOK\n} from '../../../util/constants';\nimport NotFoundError from '../../errors/global.not-found-error';\nimport RedisErrorHandler from '../../errors/redis.error-handler';\n\nmodule.exports = async function ({ id, webhookData, returnModel = false }) {\n\n    const { globalService } = await this.server.services();\n    try {\n\n        const ActionModel = await globalService.findById({ id, model: MODEL_ACTION, returnModel: true });\n        const ids = await ActionModel.getAll(MODEL_WEBHOOK, MODEL_WEBHOOK);\n        const WebhookModel = await globalService.findById({ id: ids[0], model: MODEL_WEBHOOK, returnModel: true });\n        if (WebhookModel.inDb) {\n            await WebhookModel.updateInstance({ data: webhookData });\n            return returnModel ? WebhookModel : WebhookModel.allProperties();\n        }\n        return Promise.reject(NotFoundError({ model: MODEL_WEBHOOK }));\n    }\n    catch (error) {\n        throw RedisErrorHandler({ error });\n    }\n};\n"],"file":"action.update-webhook.service.js"}