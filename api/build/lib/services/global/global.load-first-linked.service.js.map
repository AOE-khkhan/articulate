{"version":3,"sources":["../../../../server/lib/services/global/global.load-first-linked.service.js"],"names":["module","exports","parentModel","model","relationName","returnModel","redis","server","app","ids","getAll","Model","factory","allProperties","error","message"],"mappings":";;AAAA;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB,gBAAgB;AAAEC,EAAAA,WAAF;AAAeC,EAAAA,KAAf;AAAsBC,EAAAA,YAAY,GAAGD,KAArC;AAA4CE,EAAAA,WAAW,GAAG;AAA1D,CAAhB,EAAmF;AAAA,QAExFC,KAFwF,GAE9E,KAAKC,MAAL,CAAYC,GAFkE,CAExFF,KAFwF;;AAIhG,MAAI;AACA,UAAMG,GAAG,GAAG,MAAMP,WAAW,CAACQ,MAAZ,CAAmBP,KAAnB,EAA0BC,YAA1B,CAAlB;AACA,UAAMO,KAAK,GAAG,MAAML,KAAK,CAACM,OAAN,CAAcT,KAAd,EAAqBM,GAAG,CAAC,CAAD,CAAxB,CAApB;AACA,WAAOJ,WAAW,GAAGM,KAAH,GAAWA,KAAK,CAACE,aAAN,EAA7B;AACH,GAJD,CAKA,OAAOC,KAAP,EAAc;AACV,UAAM,oBAAkB;AAAEA,MAAAA,KAAF;AAASC,MAAAA,OAAO,EAAG,GAAEZ,KAAM;AAA3B,KAAlB,CAAN;AACH;AACJ,CAZD","sourcesContent":["import RedisErrorHandler from '../../errors/redis.error-handler';\n\nmodule.exports = async function ({ parentModel, model, relationName = model, returnModel = false }) {\n\n    const { redis } = this.server.app;\n\n    try {\n        const ids = await parentModel.getAll(model, relationName);\n        const Model = await redis.factory(model, ids[0]);\n        return returnModel ? Model : Model.allProperties();\n    }\n    catch (error) {\n        throw RedisErrorHandler({ error, message: `${model} error loading linked models` });\n    }\n};\n"],"file":"global.load-first-linked.service.js"}