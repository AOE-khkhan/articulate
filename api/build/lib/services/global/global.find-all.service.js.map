{"version":3,"sources":["../../../../server/lib/services/global/global.find-all.service.js"],"names":["module","exports","skip","limit","direction","field","model","filter","returnModel","redis","server","app","Model","factory","allResultsModels","findAll","totalCount","count","data","map","resultModel","allProperties","error"],"mappings":";;AAAA;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB,gBAAgB;AAAEC,EAAAA,IAAF;AAAQC,EAAAA,KAAR;AAAeC,EAAAA,SAAf;AAA0BC,EAAAA,KAA1B;AAAiCC,EAAAA,KAAjC;AAAwCC,EAAAA,MAAxC;AAAgDC,EAAAA,WAAW,GAAG;AAA9D,CAAhB,EAAuF;AAAA,QAE5FC,KAF4F,GAElF,KAAKC,MAAL,CAAYC,GAFsE,CAE5FF,KAF4F;AAGpG,QAAMG,KAAK,GAAG,MAAMH,KAAK,CAACI,OAAN,CAAcP,KAAd,CAApB;;AAEA,MAAI;AACA,UAAMQ,gBAAgB,GAAG,MAAMF,KAAK,CAACG,OAAN,CAAc;AAAEb,MAAAA,IAAF;AAAQC,MAAAA,KAAR;AAAeC,MAAAA,SAAf;AAA0BC,MAAAA,KAA1B;AAAiCE,MAAAA;AAAjC,KAAd,CAA/B;;AACA,QAAIC,WAAJ,EAAiB;AACb,aAAOM,gBAAP;AACH;;AACD,UAAME,UAAU,GAAG,MAAMJ,KAAK,CAACK,KAAN,EAAzB;AACA,UAAMC,IAAI,GAAGJ,gBAAgB,CAACK,GAAjB,CAAsBC,WAAD,IAAiBA,WAAW,CAACC,aAAZ,EAAtC,CAAb;AACA,WAAO;AAAEH,MAAAA,IAAF;AAAQF,MAAAA;AAAR,KAAP;AACH,GARD,CASA,OAAOM,KAAP,EAAc;AACV,UAAM,oBAAkB;AAAEA,MAAAA;AAAF,KAAlB,CAAN;AACH;AACJ,CAjBD","sourcesContent":["import RedisErrorHandler from '../../errors/redis.error-handler';\n\nmodule.exports = async function ({ skip, limit, direction, field, model, filter, returnModel = false }) {\n\n    const { redis } = this.server.app;\n    const Model = await redis.factory(model);\n\n    try {\n        const allResultsModels = await Model.findAll({ skip, limit, direction, field, filter });\n        if (returnModel) {\n            return allResultsModels;\n        }\n        const totalCount = await Model.count();\n        const data = allResultsModels.map((resultModel) => resultModel.allProperties());\n        return { data, totalCount };\n    }\n    catch (error) {\n        throw RedisErrorHandler({ error });\n    }\n};\n"],"file":"global.find-all.service.js"}