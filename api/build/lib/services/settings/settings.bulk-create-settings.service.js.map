{"version":3,"sources":["../../../../server/lib/services/settings/settings.bulk-create-settings.service.js"],"names":["module","exports","settingsData","redis","server","app","services","settingsService","Promise","all","_","map","value","name","Model","factory","MODEL_SETTINGS","createInstance","data","findAll","error"],"mappings":";;AAAA;;AACA;;AACA;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB,gBAAgB;AAAEC,EAAAA;AAAF,CAAhB,EAAkC;AAAA,QAEvCC,KAFuC,GAE7B,KAAKC,MAAL,CAAYC,GAFiB,CAEvCF,KAFuC;;AAAA,eAGnB,MAAM,KAAKC,MAAL,CAAYE,QAAZ,EAHa;AAAA,QAGvCC,eAHuC,QAGvCA,eAHuC;;AAI/C,MAAI;AACA,UAAMC,OAAO,CAACC,GAAR,CAAYC,gBAAEC,GAAF,CAAMT,YAAN,EAAoB,OAAOU,KAAP,EAAcC,IAAd,KAAuB;AAEzD,YAAMC,KAAK,GAAG,MAAMX,KAAK,CAACY,OAAN,CAAcC,yBAAd,CAApB;AACA,YAAMF,KAAK,CAACG,cAAN,CAAqB;AAAEC,QAAAA,IAAI,EAAE;AAAEL,UAAAA,IAAF;AAAQD,UAAAA;AAAR;AAAR,OAArB,CAAN;AACH,KAJiB,CAAZ,CAAN;AAMA,WAAO,MAAML,eAAe,CAACY,OAAhB,EAAb;AACH,GARD,CASA,OAAOC,KAAP,EAAc;AACV,UAAM,oBAAkB;AAAEA,MAAAA;AAAF,KAAlB,CAAN;AACH;AACJ,CAhBD","sourcesContent":["import _ from 'lodash';\nimport { MODEL_SETTINGS } from '../../../util/constants';\nimport RedisErrorHandler from '../../errors/redis.error-handler';\n\nmodule.exports = async function ({ settingsData }) {\n\n    const { redis } = this.server.app;\n    const { settingsService } = await this.server.services();\n    try {\n        await Promise.all(_.map(settingsData, async (value, name) => {\n\n            const Model = await redis.factory(MODEL_SETTINGS);\n            await Model.createInstance({ data: { name, value } });\n        }));\n\n        return await settingsService.findAll();\n    }\n    catch (error) {\n        throw RedisErrorHandler({ error });\n    }\n};\n\n\n"],"file":"settings.bulk-create-settings.service.js"}