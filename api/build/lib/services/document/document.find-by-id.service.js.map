{"version":3,"sources":["../../../../server/lib/services/document/document.find-by-id.service.js"],"names":["module","exports","id","returnModel","es","server","app","DocumentModel","models","MODEL_DOCUMENT","doc","findById","refresh","_id","_source","error"],"mappings":";;AAAA;;AACA;;;;;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB,gBAAgB;AAAEC,EAAAA,EAAF;AAAMC,EAAAA,WAAW,GAAG;AAApB,CAAhB,EAA6C;AAAA,QAElDC,EAFkD,GAE3C,KAAKC,MAAL,CAAYC,GAF+B,CAElDF,EAFkD;AAG1D,QAAMG,aAAa,GAAGH,EAAE,CAACI,MAAH,CAAUC,yBAAV,CAAtB;;AACA,MAAI;AACA,UAAMC,GAAG,GAAG,MAAMH,aAAa,CAACI,QAAd,CAAuB;AAAET,MAAAA,EAAF;AAAMU,MAAAA,OAAO,EAAE;AAAf,KAAvB,CAAlB;;AACA,QAAIT,WAAJ,EAAiB;AACb,aAAOO,GAAP;AACH;;AACD;AAASR,MAAAA,EAAE,EAAEQ,GAAG,CAACG;AAAjB,OAAyBH,GAAG,CAACI,OAA7B;AACH,GAND,CAOA,OAAOC,KAAP,EAAc;AACV,UAAM,iBAAe;AAAEA,MAAAA;AAAF,KAAf,CAAN;AACH;AACJ,CAdD","sourcesContent":["import { MODEL_DOCUMENT } from '../../../util/constants';\nimport ESErrorHandler from '../../errors/es.error-handler';\n\nmodule.exports = async function ({ id, returnModel = false }) {\n\n    const { es } = this.server.app;\n    const DocumentModel = es.models[MODEL_DOCUMENT];\n    try {\n        const doc = await DocumentModel.findById({ id, refresh: true });\n        if (returnModel) {\n            return doc;\n        }\n        return { id: doc._id, ...doc._source };\n    }\n    catch (error) {\n        throw ESErrorHandler({ error });\n    }\n};\n"],"file":"document.find-by-id.service.js"}