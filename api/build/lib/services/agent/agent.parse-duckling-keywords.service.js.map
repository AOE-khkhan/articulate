{"version":3,"sources":["../../../../server/lib/services/agent/agent.parse-duckling-keywords.service.js"],"names":["module","exports","AgentModel","text","timezone","ducklingURL","server","services","ducklingService","startTime","Moment","property","ducklingParseResponse","parse","language","baseURL","endTime","duration","diff","asMilliseconds","map","ducklingParse","elapsed_time_ms","length"],"mappings":";;AAAA;;;;;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB,gBAAgB;AAAEC,EAAAA,UAAF;AAAcC,EAAAA,IAAd;AAAoBC,EAAAA,QAApB;AAA8BC,EAAAA;AAA9B,CAAhB,EAA6D;AAAA,eAE9C,MAAM,KAAKC,MAAL,CAAYC,QAAZ,EAFwC;AAAA,QAElEC,eAFkE,QAElEA,eAFkE;;AAI1E,QAAMC,SAAS,GAAG,IAAIC,eAAJ,EAAlB;AACAN,EAAAA,QAAQ,GAAGA,QAAQ,IAAIF,UAAU,CAACS,QAAX,CAAoB,UAApB,CAAvB;AACA,QAAMC,qBAAqB,GAAG,MAAMJ,eAAe,CAACK,KAAhB,CAAsB;AACtDV,IAAAA,IADsD;AAEtDC,IAAAA,QAFsD;AAGtDU,IAAAA,QAAQ,EAAEZ,UAAU,CAACS,QAAX,CAAoB,UAApB,CAH4C;AAItDI,IAAAA,OAAO,EAAEV;AAJ6C,GAAtB,CAApC;AAMA,QAAMW,OAAO,GAAG,IAAIN,eAAJ,EAAhB;;AACA,QAAMO,QAAQ,GAAGP,gBAAOO,QAAP,CAAgBD,OAAO,CAACE,IAAR,CAAaT,SAAb,CAAhB,EAAyC,IAAzC,EAA+CU,cAA/C,EAAjB;;AACA,SAAOP,qBAAqB,CAACQ,GAAtB,CAA2BC,aAAD,IAAmB;AAEhD,6BAAYA,aAAZ,EAA8B;AAAEC,MAAAA,eAAe,EAAEL,QAAQ,GAAGL,qBAAqB,CAACW;AAApD,KAA9B;AACH,GAHM,CAAP;AAIH,CAlBD","sourcesContent":["import Moment from 'moment';\n\nmodule.exports = async function ({ AgentModel, text, timezone, ducklingURL }) {\n\n    const { ducklingService } = await this.server.services();\n\n    const startTime = new Moment();\n    timezone = timezone || AgentModel.property('timezone');\n    const ducklingParseResponse = await ducklingService.parse({\n        text,\n        timezone,\n        language: AgentModel.property('language'),\n        baseURL: ducklingURL\n    });\n    const endTime = new Moment();\n    const duration = Moment.duration(endTime.diff(startTime), 'ms').asMilliseconds();\n    return ducklingParseResponse.map((ducklingParse) => {\n\n        return { ...ducklingParse, ...{ elapsed_time_ms: duration / ducklingParseResponse.length } };\n    });\n};\n"],"file":"agent.parse-duckling-keywords.service.js"}