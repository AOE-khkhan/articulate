{"version":3,"sources":["../../../../server/lib/services/frame/frame.create.service.js"],"names":["module","exports","data","context","returnModel","redis","server","app","FrameModel","factory","MODEL_FRAME","Promise","reject","message","createInstance","link","saveInstance","allProperties","error"],"mappings":";;AAAA;;AACA;;AACA;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB,gBAAgB;AAAEC,EAAAA,IAAF;AAAQC,EAAAA,OAAO,GAAG,IAAlB;AAAwBC,EAAAA,WAAW,GAAG;AAAtC,CAAhB,EAA+D;AAAA,QAEpEC,KAFoE,GAE1D,KAAKC,MAAL,CAAYC,GAF8C,CAEpEF,KAFoE;AAG5E,QAAMG,UAAU,GAAG,MAAMH,KAAK,CAACI,OAAN,CAAcC,sBAAd,CAAzB;;AACA,MAAIP,OAAO,KAAK,IAAhB,EAAsB;AAClB,WAAOQ,OAAO,CAACC,MAAR,CAAe,qBAAmB;AACrCC,MAAAA,OAAO,EAAG;AAD2B,KAAnB,CAAf,CAAP;AAGH;;AACD,MAAI;AACA,UAAML,UAAU,CAACM,cAAX,CAA0B;AAAEZ,MAAAA;AAAF,KAA1B,CAAN;AACA,UAAMC,OAAO,CAACY,IAAR,CAAaP,UAAb,EAAyBE,sBAAzB,CAAN;AACA,UAAMP,OAAO,CAACa,YAAR,EAAN;AACA,WAAOZ,WAAW,GAAGI,UAAH,GAAgBA,UAAU,CAACS,aAAX,EAAlC;AACH,GALD,CAMA,OAAOC,KAAP,EAAc;AACV,UAAM,oBAAkB;AAAEA,MAAAA;AAAF,KAAlB,CAAN;AACH;AACJ,CAlBD","sourcesContent":["import { MODEL_FRAME } from '../../../util/constants';\nimport GlobalDefaultError from '../../errors/global.default-error';\nimport RedisErrorHandler from '../../errors/redis.error-handler';\n\nmodule.exports = async function ({ data, context = null, returnModel = false }) {\n\n    const { redis } = this.server.app;\n    const FrameModel = await redis.factory(MODEL_FRAME);\n    if (context === null) {\n        return Promise.reject(GlobalDefaultError({\n            message: `Context can't be null for a frame`\n        }));\n    }\n    try {\n        await FrameModel.createInstance({ data });\n        await context.link(FrameModel, MODEL_FRAME);\n        await context.saveInstance();\n        return returnModel ? FrameModel : FrameModel.allProperties();\n    }\n    catch (error) {\n        throw RedisErrorHandler({ error });\n    }\n};\n"],"file":"frame.create.service.js"}