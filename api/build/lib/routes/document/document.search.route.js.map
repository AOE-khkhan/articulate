{"version":3,"sources":["../../../../server/lib/routes/document/document.search.route.js"],"names":["module","exports","method","path","ROUTE_DOCUMENT","PARAM_SEARCH","options","description","tags","notes","validate","Validator","search","handler","request","services","documentService","body","payload","message","statusCode","Boom"],"mappings":";;AAAA;;AACA;;AAIA;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB;AACbC,EAAAA,MAAM,EAAE,MADK;AAEbC,EAAAA,IAAI,EAAG,IAAGC,yBAAe,IAAGC,uBAAa,EAF5B;AAGbC,EAAAA,OAAO,EAAE;AACLC,IAAAA,WAAW,EAAG,QADT;AAELC,IAAAA,IAAI,EAAE,CAAC,KAAD,CAFD;AAGLC,IAAAA,KAAK,EAAE,CAAC,qGAAD,CAHF;AAKLC,IAAAA,QAAQ,EAAEC,kBAAUC,MALf;AAMLC,IAAAA,OAAO,EAAE,MAAOC,OAAP,IAAmB;AAAA,mBAEI,MAAMA,OAAO,CAACC,QAAR,EAFV;AAAA,YAEhBC,eAFgB,QAEhBA,eAFgB;;AAGxB,UAAI;AACA,eAAO,MAAMA,eAAe,CAACJ,MAAhB,CAAuB;AAAEK,UAAAA,IAAI,EAAEH,OAAO,CAACI;AAAhB,SAAvB,CAAb;AACH,OAFD,CAGA,cAAgC;AAAA,YAAvBC,OAAuB,SAAvBA,OAAuB;AAAA,YAAdC,UAAc,SAAdA,UAAc;AAE5B,eAAO,IAAIC,aAAJ,CAASF,OAAT,EAAkB;AAAEC,UAAAA;AAAF,SAAlB,CAAP;AACH;AACJ;AAhBI;AAHI,CAAjB","sourcesContent":["import Boom from 'boom';\nimport {\n    PARAM_SEARCH,\n    ROUTE_DOCUMENT\n} from '../../../util/constants';\nimport Validator from '../../validators/document.validator';\n\nmodule.exports = {\n    method: 'post',\n    path: `/${ROUTE_DOCUMENT}/${PARAM_SEARCH}`,\n    options: {\n        description : 'Search',\n        tags: ['api'],\n        notes: ['Search query over the Document index using full request definition in the Elasticsearchâ€™s Query DSL'],\n\n        validate: Validator.search,\n        handler: async (request) => {\n\n            const { documentService } = await request.services();\n            try {\n                return await documentService.search({ body: request.payload });\n            }\n            catch ({ message, statusCode }) {\n\n                return new Boom(message, { statusCode });\n            }\n        }\n    }\n};\n\n"],"file":"document.search.route.js"}