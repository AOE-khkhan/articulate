{"version":3,"sources":["../../../server/lib/validators/context.validator.js"],"names":["ContextModel","require","schema","ContextValidate","constructor","create","payload","PARAM_SESSION","sessionId","required","createFrameBySession","params","action","Joi","string","slots","object","updateFrameBySessionAndFrame","PARAM_FRAME","number","update","savedSlots","actionQueue","responseQueue","creationDate","modificationDate","findBySession","query","PARAM_LOAD_FRAMES","boolean","optional","default","findFramesBySession","PARAM_SKIP","integer","description","PARAM_LIMIT","PARAM_DIRECTION","allow","PARAM_FIELD","findFrameBySessionAndFrame","removeBySession","removeBySessionAndFrame","actionValidate","module","exports"],"mappings":"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","sourcesContent":["import Joi from 'joi';\nimport {\n    PARAM_LOAD_FRAMES,\n    PARAM_SESSION,\n    PARAM_FRAME,\n    PARAM_SKIP,\n    PARAM_LIMIT,\n    PARAM_DIRECTION,\n    PARAM_FIELD\n} from '../../util/constants';\n\nconst ContextModel = require('../models/context.model').schema;\n\nclass ContextValidate {\n    constructor() {\n\n        this.create = {\n            payload: (() => {\n\n                return {\n                    [PARAM_SESSION]: ContextModel.sessionId.required()\n                };\n            })()\n        };\n\n        this.createFrameBySession = {\n            params: (() => {\n\n                return {\n                    [PARAM_SESSION]: ContextModel.sessionId.required()\n                };\n            })(),\n            payload: (() => {\n\n                return {\n                    action: Joi.string().required(),\n                    slots: Joi.object().required()\n                };\n            })()\n        };\n\n        this.updateFrameBySessionAndFrame = {\n            params: (() => {\n\n                return {\n                    [PARAM_SESSION]: ContextModel.sessionId.required(),\n                    [PARAM_FRAME]: Joi.number().required() //Not certain why there is no frames model\n                };\n            })(),\n            payload: (() => {\n\n                return {\n                    action: Joi.string(),\n                    slots: Joi.object().required()\n                };\n            })()\n        };\n\n        this.update = {\n            params: (() => {\n\n                return {\n                    [PARAM_SESSION]: ContextModel.sessionId.required() };\n            })(),\n            payload: (() => {\n\n                return {\n                    savedSlots: ContextModel.savedSlots,\n                    actionQueue: ContextModel.actionQueue,\n                    responseQueue: ContextModel.responseQueue,\n                    creationDate: ContextModel.creationDate,\n                    modificationDate: ContextModel.modificationDate\n                };\n            })()\n        };\n\n        this.findBySession = {\n            params: (() => {\n\n                return {\n                    [PARAM_SESSION]: ContextModel.sessionId.required()\n                };\n            })(),\n            query: (() => {\n\n                return {\n                    [PARAM_LOAD_FRAMES]: Joi.boolean().optional().default(false)\n                };\n            })()\n        };\n\n        this.findFramesBySession = {\n            params: (() => {\n\n                return {\n                    [PARAM_SESSION]: ContextModel.sessionId.required()\n                };\n            })(),\n            query: (() => {\n\n                return {\n                    [PARAM_SKIP]: Joi\n                        .number()\n                        .integer()\n                        .optional()\n                        .description('Number of resources to skip. Default=0'),\n                    [PARAM_LIMIT]: Joi\n                        .number()\n                        .integer()\n                        .optional()\n                        .description('Number of resources to return. Default=50'),\n                    [PARAM_DIRECTION]: Joi\n                        .string()\n                        .optional()\n                        .allow('ASC', 'DESC')\n                        .description('Sort direction. Default= ASC'),\n                    [PARAM_FIELD]: Joi\n                        .string()\n                        .optional()\n                        .description('Field used to do the sorting')\n                };\n            })()\n        };\n\n        this.findFrameBySessionAndFrame = {\n            params: (() => {\n\n                return {\n                    [PARAM_SESSION]: ContextModel.sessionId.required(),\n                    [PARAM_FRAME]: Joi.number().required() //Not certain why there is no frames model\n                };\n            })()\n        };\n\n        this.removeBySession = {\n            params: (() => {\n\n                return {\n                    [PARAM_SESSION]: ContextModel.sessionId.required()\n                };\n            })()\n        };\n\n        this.removeBySessionAndFrame = {\n            params: (() => {\n\n                return {\n                    [PARAM_SESSION]: ContextModel.sessionId.required(),\n                    [PARAM_FRAME]: Joi.number().required() //Not certain why there is no frames model\n                };\n            })()\n        };\n    }\n}\n\nconst actionValidate = new ContextValidate();\nmodule.exports = actionValidate;\n"],"file":"context.validator.js"}