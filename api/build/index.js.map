{"version":3,"sources":["../server/index.js"],"names":["logger","require","name","exports","deployment","start","manifest","Manifest","get","process","env","server","Glue","compose","relativeTo","__dirname","initialize","info","uri","module","parent","on","err"],"mappings":";;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAGC,OAAO,CAAC,eAAD,CAAP,CAAyB;AAAEC,EAAAA,IAAI,EAAG;AAAT,CAAzB,CAAf;;AAEAC,OAAO,CAACC,UAAR,GAAqB,MAAOC,KAAP,IAAiB;AAElC,QAAMC,QAAQ,GAAGC,kBAASC,GAAT,CAAa,GAAb,EAAkBC,OAAO,CAACC,GAA1B,CAAjB;;AACA,QAAMC,MAAM,GAAG,MAAMC,cAAKC,OAAL,CAAaP,QAAb,EAAuB;AAAEQ,IAAAA,UAAU,EAAEC;AAAd,GAAvB,CAArB;AAEA,QAAMJ,MAAM,CAACK,UAAP,EAAN;;AAEA,MAAI,CAACX,KAAL,EAAY;AACR,WAAOM,MAAP;AACH;;AAED,QAAMA,MAAM,CAACN,KAAP,EAAN;AAEAL,EAAAA,MAAM,CAACiB,IAAP,CAAa,qBAAoBN,MAAM,CAACM,IAAP,CAAYC,GAAI,EAAjD;AACA,SAAOP,MAAP;AACH,CAfD;;AAiBA,IAAI,CAACQ,MAAM,CAACC,MAAZ,EAAoB;AAEhBjB,EAAAA,OAAO,CAACC,UAAR,CAAmB,IAAnB;AAEAK,EAAAA,OAAO,CAACY,EAAR,CAAW,oBAAX,EAAkCC,GAAD,IAAS;AAEtC,UAAMA,GAAN;AACH,GAHD;AAIH","sourcesContent":["import Glue from 'glue';\nimport Manifest from './manifest';\n\nconst logger = require('./util/logger')({ name: `server` });\n\nexports.deployment = async (start) => {\n\n    const manifest = Manifest.get('/', process.env);\n    const server = await Glue.compose(manifest, { relativeTo: __dirname });\n\n    await server.initialize();\n\n    if (!start) {\n        return server;\n    }\n\n    await server.start();\n\n    logger.info(`Server started at ${server.info.uri}`);\n    return server;\n};\n\nif (!module.parent) {\n\n    exports.deployment(true);\n\n    process.on('unhandledRejection', (err) => {\n\n        throw err;\n    });\n}\n"],"file":"index.js"}